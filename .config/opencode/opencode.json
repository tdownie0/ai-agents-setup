{
  "$schema": "https://opencode.ai/config.json",
  "model": "google/gemini-2.5-flash",
  "small_model": "google/gemini-1.5-flash-8b",
  "agent": {
    "plan": {
      "mode": "primary",
      "model": "google/gemini-1.5-flash-8b",
      "description": "Handles complex architecture and task breakdown",
      "tools": { "write": false, "bash": true }
    },
    "build": {
      "mode": "primary",
      "model": "google/gemini-2.5-flash",
      "fallbacks": ["google/gemini-2.0-flash", "google/gemini-1.5-flash-8b"]
    },
    "worker": {
      "mode": "subagent",
      "model": "google/gemini-1.5-flash-8b",
      "description": "Executes small file-writing tasks in parallel"
    }
  },
  "orchestrator": {
    "state_store": "redis://redis:6379",
    "parallel_limit": 3
  },
  "mcp": {
    "docker_gateway": {
      "type": "local",
      "command": [
        "docker", "exec", "-i", "model_md-mcp-gateway-1",
        "npx", "-y", "@modelcontextprotocol/server-postgres",
        "postgres://user:pass@db:5432/model_md"
      ],
      "enabled": true
    },
    "filesystem": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-filesystem", "."],
      "enabled": true
    },
    "shell": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-shell"],
      "environment": {
        "SHELL_ALLOW_LIST": ["npm", "npx", "git", "docker"]
      },
      "enabled": true
    }
  }
}
