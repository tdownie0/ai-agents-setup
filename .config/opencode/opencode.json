{
  "$schema": "https://opencode.ai/config.json",
  "model": "google/gemini-2.5-flash",
  "small_model": "google/gemini-2.0-flash-lite",
  "fallbacks": [
    "google/gemini-2.0-flash", 
    "google/gemini-2.0-flash-lite",
    "kimi/k2.5-free"
  ],
  "agent": {
    "retry_strategy": "exponential_backoff",
    "max_retries": 3,
    "cooldown_period": "30s",
    "plan": {
      "mode": "primary",
      "model": "google/gemini-2.0-flash-lite",
      "description": "Architect: Lightweight and rarely rate-limited."
    },
    "build": {
      "mode": "primary",
      "model": "google/gemini-2.5-flash",
      "fallbacks": ["google/gemini-2.0-flash", "google/gemini-2.0-flash-lite"]
    },
    "worker": {
      "mode": "subagent",
      "model": "google/gemini-2.0-flash-lite",
      "description": "Sub-agent: High throughput for file writing."
    }
  },
  "orchestrator": {
    "state_store": "redis://redis:6379",
    "parallel_limit": 2
  },
  "mcp": {
    "docker_gateway": {
      "type": "local",
      "command": [
        "docker", "exec", "-i", "model_md-mcp-gateway-1",
        "npx", "-y", "@modelcontextprotocol/server-postgres",
        "postgres://user:pass@db:5432/model_md"
      ],
      "enabled": true
    },
    "filesystem": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-filesystem", "."],
      "enabled": true
    },
    "shell": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-shell"],
      "environment": {
        "SHELL_ALLOW_LIST": ["npm", "npx", "git", "docker"]
      },
      "enabled": true
    }
  }
}
